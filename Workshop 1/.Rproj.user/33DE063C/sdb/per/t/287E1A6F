{
    "collab_server" : "",
    "contents" : "# Load libraries\nlibrary(\"knitr\")\noptions(digits=2)\nlibrary(\"rmarkdown\")\nlibrary(\"devtools\")\nlibrary(\"readr\")\nlibrary(\"tidyr\")\nlibrary(\"ggplot2\")\nlibrary(\"ggthemes\")\nlibrary(\"gridExtra\")\nlibrary(\"dplyr\")\nlibrary(\"lubridate\")\nlibrary(\"GGally\")\nlibrary(\"rworldmap\")\nlibrary(\"ggmap\")\nlibrary(\"scales\")\nlibrary(\"dichromat\")\nlibrary(\"RColorBrewer\")\nlibrary(\"viridis\")\nlibrary(\"purrr\")\nlibrary(\"broom\")\nlibrary(\"timeDate\")\nlibrary(\"haven\")\nlibrary(\"boot\")\n\n# Read data, make plots\nrates <- read_csv(\"data/rates.csv\")\nrates[1:5,1:8]\nggplot(data=rates, aes(x=date, y=AUD)) + geom_point()\nggplot(data=rates, aes(x=date, y=AUD)) + geom_line()\nggplot(data=rates, aes(x=date, y=AUD)) + \n  geom_line() + geom_point()\n\nggplot(data=rates, aes(x=date, y=AUD)) + geom_line() +\n  geom_line(aes(y=NZD), colour=\"blue\") + \n  geom_line(aes(y=GBP), colour=\"red\")\nrates.sub <- select(rates, date, AUD, NZD, GBP)\nrates.sub.m <- gather(rates.sub, currency, rate, -date)\nggplot(data=rates.sub.m, aes(x=date, y=rate, colour=currency)) + geom_line() \n\nrates.sub <- mutate(rates.sub, AUD=scale(AUD), NZD=scale(NZD), GBP=scale(GBP))\nrates.sub$date <- as.Date(rates.sub$date)\nrates.sub.m <- gather(rates.sub, currency, rate, -date)\nggplot(data=rates.sub.m, aes(x=date, y=rate, colour=currency)) +\n         geom_line()\nggplot(data=rates.sub, aes(x=AUD, y=NZD, colour=date)) + geom_path() + theme(aspect.ratio=1)\n\n## AUD rate is mapped to position along the x axis\n## NZD rate is mapped to position along the y axis\n## first differences are mapped to lines\n## date is mapped to colour of line, date at beginning of line\n\nggplot(data=rates.sub, aes(x=AUD, y=NZD)) + \n  geom_point(alpha=0.2) + geom_rug(colour=\"red\", alpha=0.3) + \n  theme(aspect.ratio=1)\n\n# Internet usage\ninternet <- read_csv(\"data/internet.csv\")\ndim(internet)\ncolnames(internet)\nggplot(data=internet, aes(x=`Social networks`)) + \n  geom_bar(binwidth=0.5) \nggplot(data=internet, aes(x=`Social networks`)) + \n  geom_bar(binwidth=0.5) +\n  facet_grid(Gender~name)\nggplot(data=internet, aes(x=`Social networks`, fill=Gender)) + \n  geom_bar(binwidth=0.5) +\n  facet_wrap(~name, ncol=5) + theme(legend.position=\"bottom\")\nggplot(data=internet) + \n  geom_bar(aes(x=`Social networks`, fill=Gender),\n          position=\"dodge\") +\n  facet_wrap(~name, ncol=5) + \n  theme(legend.position=\"bottom\")\nggplot(data=internet, aes(x=factor(1), fill=factor(`Social networks`))) + \n  geom_bar(width = 1) + scale_x_discrete(\"\") +\n  scale_y_continuous(\"\") +\n  scale_fill_hue(\"Social Network Use\") +\n  coord_polar(theta = \"y\")\n\n# Grad programs\ngrad <- read_csv(\"data/graduate-programs.csv\")\ndim(grad)\ncolnames(grad)\nggplot(data=grad, aes(x=subject, y=AvGREs)) + \n  geom_boxplot()\nggplot(data=grad, aes(x=subject, y=AvGREs)) + \n  geom_violin()\ndf <- data.frame(x=runif(100), y=runif(100), cl=sample(c(rep(\"A\", 1), rep(\"B\", 99))))\nqplot(x, y, data=df, shape=cl) + theme_bw() + theme(legend.position=\"None\", aspect.ratio=1)\n\n# Color schemes\ndisplay.brewer.all()\nggplot(data=internet, aes(x=`Social networks`, fill=Gender)) + \n  geom_bar(position=\"dodge\") +\n  scale_fill_manual(values=c(\"Female\"=\"orange\", \"Male\"=\"darkgreen\")) + \n  facet_wrap(~name, ncol=5) + \n  theme(legend.position=\"bottom\")\n\n# Scales\nggplot(data=grad, aes(x=subject, y=AvGREs)) + \n  geom_boxplot() + scale_y_log10()\nrates.sub.m$date <- as.POSIXct(rates.sub.m$date)\nggplot(data=rates.sub.m, aes(x=date, y=rate, \n  colour=currency)) + geom_line() + \n  scale_x_datetime(breaks = date_breaks(\"1 month\"), \n                   labels = date_format(\"%b\"))\nggplot(data=rates.sub.m, aes(x=date, y=rate, \n        colour=currency)) + geom_line() +\n  xlab(\"Date\") + ylab(\"Standardized rates\") + \n  ggtitle(\"Cross rates 23/2/2015-11/11/2015\")\np <- ggplot(data=rates.sub.m, aes(x=date, y=rate, \n  colour=currency)) + geom_line() + \n  scale_x_datetime(breaks = date_breaks(\"1 month\"), \n                   labels = date_format(\"%b\"))\nggplot(data=rates.sub.m, aes(x=date, y=rate, colour=currency)) +\n  geom_line() +\n  xlab(expression(Date[i]^2~ mu ~ pi * sigma)) + \n  ylab(\"Standardized rates\") + \n  ggtitle(\"Cross rates 23/2/2015-11/11/2015\")\n\n# Themes\np + theme(legend.position = \"bottom\")\np + theme_tufte()\np + theme_economist()\n\n# Color blindness\np + scale_color_brewer(\"\", palette = \"Dark2\")\nclrs <- hue_pal()(3)\np + scale_color_manual(\"\", values=clrs) + \n  theme(legend.position = \"none\")\nclrs <- dichromat(hue_pal()(3))\np + scale_color_manual(\"\", values=clrs) + \n  theme(legend.position = \"none\")\nclrs <- brewer.pal(3, \"Dark2\")\np + scale_color_manual(\"\", values=clrs) + \n  theme(legend.position = \"none\")\nclrs <- dichromat(brewer.pal(3, \"Dark2\"))\np + scale_color_manual(\"\", values=clrs) + \n  theme(legend.position = \"none\")\n\n# Proximity\nggplot(data=internet, aes(x=`Social networks`)) + \n         geom_bar() + \n  facet_grid(Gender~name)\ninternet.m.tb <- internet[,c(1,3,8)] %>%\n                     group_by(name, Gender, `Social networks`) %>% \n                     tally(sort=TRUE) \ninternet.m.tb <- subset(internet.m.tb, !is.na(`Social networks`))\ninternet.m.tb.n <- summarise(group_by(internet.m.tb, name, Gender), tot=sum(n)) \ninternet.m.tb <- merge(internet.m.tb, internet.m.tb.n)\ninternet.m.tb.p <- summarise(group_by(internet.m.tb, name, Gender, `Social networks`), p=n/tot)\nggplot(data=internet.m.tb.p, aes(x=`Social networks`, y=p, color=Gender)) +\n  geom_line() + \n  facet_wrap(~name, ncol=5) + theme(legend.position=\"bottom\")\nggplot(data=internet.m.tb.p, aes(x=`Social networks`, y=p, color=name)) + \n  geom_line() + \n  facet_wrap(~Gender, ncol=2)\n\n## workers <- read_csv(file=\"data/Assembled_Workers__Compensation_Claims___Beginning_2000.csv\")#, n_max=100000)\n## dim(workers)\n## colnames(workers)\n## table(workers$`Claim Type`)\n## workers$`District Name` <- factor(workers$`District Name`,\n##   levels=names(table(workers$`District Name`)[order(table(workers$`District Name`), decreasing=TRUE)]))\n## ggplot(data=workers, aes(x=`District Name`)) + geom_bar()\n## ggplot(data=workers, aes(x=`District Name`, fill=Gender)) +\n##   geom_bar(position=\"fill\")\n## ggplot(data=workers, aes(x=`Claim Type`, y=`Age at Injury`)) +\n##   geom_violin()\n",
    "created" : 1463705546402.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3783153443",
    "id" : "287E1A6F",
    "lastKnownWriteTime" : 1463546016,
    "last_content_update" : 1463546016,
    "path" : "~/talks/ISCRR/ISCRR/Workshop 1/2-basic-plots.R",
    "project_path" : "2-basic-plots.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}